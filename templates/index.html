<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Steam Game Cloud Backup - by BihiBihi</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <header>
      <h1>Steam Game Cloud Backup - by BihiBihi</h1>
      <div id="status-dot" title="Disconnected"></div>
    </header>

    <main>
      <section class="card">
        <h2>1) Configure GitHub</h2>
        <div class="grid">
          <div>
            <label>Owner / Org</label>
            <input id="owner" placeholder="your-github-username-or-org" />
          </div>
          <div>
            <label>Repository</label>
            <input id="repo" placeholder="repo-name (must already exist)" />
          </div>
          <div>
            <label>Current Cloud Backup Folder Selected</label>
            <select id="branch-dd"></select>
            <input id="branch" value="main" style="display:none" />
          </div>
        </div>

        <div class="row">
          <button id="load-branches">Reload Game List</button>
          <span id="branch-count" class="muted"></span>
        </div>

        <div id="branch-list" class="branch-list">
          <!-- filled by JS -->
        </div>

        <div class="row">
          <button id="sync-all">SYNC ALL GAME (CHECKBOX)</button>
        </div>

        <div class="grid">
          <div>
            <label>New Backup Name (Game Name)</label>
            <input id="new-branch-name" placeholder="Game Name (e.g Cyberpunk2077) Make Sure no Space" />
          </div>
          <div style="display:flex;align-items:flex-end">
            <button id="create-branch">Create Cloud Backup Folder</button>
          </div>
        </div>

        <div class="grid">
          <div>
            <label>GitHub Token <span class="muted">(only needed once)</span></label>
            <input id="token" type="password" placeholder="ghp_..." />
          </div>
        </div>
        <button id="save-config">Save</button>
        <span id="config-status" class="muted"></span>
      </section>

      <section class="card">
        <h2>2) Select Local Folder To Be Backup</h2>
        <div class="row">
          <input id="selected-folder" readonly placeholder="(empty — pick a folder to upload)" />
          <button id="btn-select">Browse…</button>
        </div>
        <div class="row">
          <button id="btn-scan">Scan</button>
          <span id="scan-count" class="muted"></span>
          <span id="mapped-folder-tip" class="muted" style="margin-left:auto"></span>
        </div>
        <div id="files"></div>
      </section>

      <section class="card">
        <h2>3) Sync</h2>
        <div class="row">
          <button id="btn-upload">Upload to Current Cloud Folder (See Current Game)</button>
          <button id="btn-download">Download Current Cloud Folder (See Current Game)</button>
        </div>
        <progress id="progress" value="0" max="100" style="width:100%;height:10px;"></progress>
        <pre id="log" class="log"></pre>
      </section>
    </main>

    <footer>
      <span class="muted">Make Sure you have set up Repository in Github, Obtain your token and ensure you know your game saves file location. Always set correct Current Cloud Backup Folder before performing backup or download</span>
    </footer>

    <script src="/static/main.js"></script>
  </body>
</html>
